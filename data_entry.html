

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>2. GEMD Data Model &mdash; Citrine Python 1.8.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.png"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. [ALPHA] Data Extraction" href="data_extraction.html" />
    <link rel="prev" title="1.8. Code Examples" href="getting_started/code_examples.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.8.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started/index.html">1. Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. GEMD Data Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-data-model-objects">2.1. Creating Data Model Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#identifying-data-model-objects">2.2. Identifying Data Model Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#registering-data-model-objects">2.3. Registering Data Model Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#finding-data-model-objects">2.4. Finding Data Model Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#updating-data-model-objects">2.5. Updating Data Model Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#referencing-data-model-objects">2.6. Referencing Data Model Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#material-history">2.7. Material History</a></li>
<li class="toctree-l2"><a class="reference internal" href="#validating-data-model-objects">2.8. Validating Data Model Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dry-run-validation">2.8.1. Dry-Run Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#template-and-simple-validations">2.8.2. Template and Simple Validations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data_extraction.html">3. [ALPHA] Data Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflows/index.html">4. AI Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="formulations_example.html">5. Formulations Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ/index.html">6. FAQ</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Citrine Python</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">2. </span>GEMD Data Model</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/data_entry.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="gemd-data-model">
<h1><span class="section-number">2. </span>GEMD Data Model<a class="headerlink" href="#gemd-data-model" title="Permalink to this headline">¶</a></h1>
<section id="creating-data-model-objects">
<h2><span class="section-number">2.1. </span>Creating Data Model Objects<a class="headerlink" href="#creating-data-model-objects" title="Permalink to this headline">¶</a></h2>
<p>Each data object and template in the <a class="reference external" href="https://citrineinformatics.github.io/gemd-docs/">GEMD</a> (Graphical Expression of Materials Data) data model has a corresponding resource in the Citrine Python client.
For example, the <a class="reference internal" href="reference/citrine.resources.process_spec.html#citrine.resources.process_spec.ProcessSpec" title="citrine.resources.process_spec.ProcessSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProcessSpec</span></code></a> class implements the <a class="reference external" href="https://citrineinformatics.github.io/gemd-docs/specification/objects/#process-spec">ProcessSpec</a> object in <a class="reference external" href="https://citrineinformatics.github.io/gemd-docs/">GEMD</a>.
The Citrine Python client implementations are consistent with the <a class="reference external" href="https://citrineinformatics.github.io/gemd-docs/">GEMD</a> model specification.</p>
<p>The Citrine Python client is built on top of and entirely interoperable with the <a class="reference external" href="https://github.com/CitrineInformatics/gemd-python">gemd-python</a> package.
Any method that accepts the Citrine Python client’s implementations of data model objects should also accept those from GEMD.</p>
</section>
<section id="identifying-data-model-objects">
<h2><span class="section-number">2.2. </span>Identifying Data Model Objects<a class="headerlink" href="#identifying-data-model-objects" title="Permalink to this headline">¶</a></h2>
<p>After registering a data model object, you will probably want to be able to find that object again.
The easiest way to get an existing object is by one of its unique identifiers.
Every data model object on the Citrine Platform has a platform-issued identifier, often referred to as the “Citrine Identifier” or “CitrineId”.
These identifiers are <a class="reference external" href="https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)">UUID4</a>, which are extremely robust but also not especially human readable.</p>
<p><a class="reference external" href="https://citrineinformatics.github.io/gemd-docs/specification/unique-identifiers/#alternative-ids">Alternative identifiers</a> are an easier way to recall data objects.
To create an alternative identifier, simply add key-value pairs to the <code class="docutils literal notranslate"><span class="pre">uids</span></code> dictionary in the data model object.
The key defines the <code class="docutils literal notranslate"><span class="pre">scope</span></code> and the value of the <code class="docutils literal notranslate"><span class="pre">id</span></code>.
As a pair, they must be unique across the entire platform.
You can think of each value of <code class="docutils literal notranslate"><span class="pre">scope</span></code> as defining a namespace, with <code class="docutils literal notranslate"><span class="pre">id</span></code> being the name within that namespace.</p>
</section>
<section id="registering-data-model-objects">
<h2><span class="section-number">2.3. </span>Registering Data Model Objects<a class="headerlink" href="#registering-data-model-objects" title="Permalink to this headline">¶</a></h2>
<p>Data model objects are created on the Citrine Platform through the <code class="docutils literal notranslate"><span class="pre">register</span></code> method present in each data model object collection that comes from a dataset.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">process_specs</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">ProcessSpec</span><span class="p">(</span><span class="o">...</span><span class="p">))</span>
</pre></div>
</div>
<p>Note that registration must be performed within the scope of a dataset: the dataset into which the objects are being written.
The data model object collections that are defined with the project scope (such as <cite>project.process_specs</cite>) are read-only and will throw an error if their register method is called.</p>
<p>If you have <a class="reference external" href="https://citrineinformatics.github.io/gemd-docs/">GEMD</a> objects, e.g., <a class="reference external" href="https://citrineinformatics.github.io/gemd-python/reference/gemd.entity.object.process_spec.html#gemd.entity.object.process_spec.ProcessSpec" title="(in GEMD-python)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProcessSpec</span></code></a>, you can register it just like the objects defined in the Citrine Python client.</p>
</section>
<section id="finding-data-model-objects">
<h2><span class="section-number">2.4. </span>Finding Data Model Objects<a class="headerlink" href="#finding-data-model-objects" title="Permalink to this headline">¶</a></h2>
<p>If you know any a data model object’s unique identifiers, then you can get that object by its unique identifier.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">process_templates</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;standard-templates&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;milling&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you don’t know any of the data model object’s unique identifiers, then you can list the data model objects and find your object in that list:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">process_templates</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
</pre></div>
</div>
<p>These results can be further constrained by dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">process_templates</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
</pre></div>
</div>
<p>The
<a class="reference internal" href="reference/citrine.resources.data_concepts.html#citrine.resources.data_concepts.DataConceptsCollection.list_by_tag" title="citrine.resources.data_concepts.DataConceptsCollection.list_by_tag"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list_by_tag()</span></code></a>,
<a class="reference internal" href="reference/citrine.resources.data_objects.html#citrine.resources.data_objects.DataObjectCollection.list_by_attribute_bounds" title="citrine.resources.data_objects.DataObjectCollection.list_by_attribute_bounds"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list_by_attribute_bounds()</span></code></a>,
and <a class="reference internal" href="reference/citrine.resources.data_concepts.html#citrine.resources.data_concepts.DataConceptsCollection.list_by_name" title="citrine.resources.data_concepts.DataConceptsCollection.list_by_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list_by_name()</span></code></a>
methods can help refine the listing to make the target object easier to find.</p>
<p>There also exist methods for locating data objects by its reference to another object:</p>
<p>Runs may be listed by spec with
<a class="reference internal" href="reference/citrine.resources.material_run.html#citrine.resources.material_run.MaterialRunCollection.list_by_spec" title="citrine.resources.material_run.MaterialRunCollection.list_by_spec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MaterialRunCollection.list_by_spec()</span></code></a>,
<a class="reference internal" href="reference/citrine.resources.ingredient_run.html#citrine.resources.ingredient_run.IngredientRunCollection.list_by_spec" title="citrine.resources.ingredient_run.IngredientRunCollection.list_by_spec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IngredientRunCollection.list_by_spec()</span></code></a>,
<a class="reference internal" href="reference/citrine.resources.measurement_run.html#citrine.resources.measurement_run.MeasurementRunCollection.list_by_spec" title="citrine.resources.measurement_run.MeasurementRunCollection.list_by_spec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MeasurementRunCollection.list_by_spec()</span></code></a>,
and <a class="reference internal" href="reference/citrine.resources.process_run.html#citrine.resources.process_run.ProcessRunCollection.list_by_spec" title="citrine.resources.process_run.ProcessRunCollection.list_by_spec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ProcessRunCollection.list_by_spec()</span></code></a>.</p>
<p>Specs may be listed by template with
<a class="reference internal" href="reference/citrine.resources.material_spec.html#citrine.resources.material_spec.MaterialSpecCollection.list_by_template" title="citrine.resources.material_spec.MaterialSpecCollection.list_by_template"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MaterialSpecCollection.list_by_template()</span></code></a>,
<a class="reference internal" href="reference/citrine.resources.process_spec.html#citrine.resources.process_spec.ProcessSpecCollection.list_by_template" title="citrine.resources.process_spec.ProcessSpecCollection.list_by_template"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ProcessSpecCollection.list_by_template()</span></code></a>,
and <a class="reference internal" href="reference/citrine.resources.measurement_spec.html#citrine.resources.measurement_spec.MeasurementSpecCollection.list_by_template" title="citrine.resources.measurement_spec.MeasurementSpecCollection.list_by_template"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MeasurementSpecCollection.list_by_template()</span></code></a>.</p>
<p>The output material for a process can be located with
<a class="reference internal" href="reference/citrine.resources.material_run.html#citrine.resources.material_run.MaterialRunCollection.get_by_process" title="citrine.resources.material_run.MaterialRunCollection.get_by_process"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MaterialRunCollection.get_by_process()</span></code></a>
or <a class="reference internal" href="reference/citrine.resources.material_spec.html#citrine.resources.material_spec.MaterialSpecCollection.get_by_process" title="citrine.resources.material_spec.MaterialSpecCollection.get_by_process"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MaterialSpecCollection.get_by_process()</span></code></a>.</p>
<p>The ingredients a material is used in can be located with
<a class="reference internal" href="reference/citrine.resources.ingredient_run.html#citrine.resources.ingredient_run.IngredientRunCollection.list_by_material" title="citrine.resources.ingredient_run.IngredientRunCollection.list_by_material"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IngredientRunCollection.list_by_material()</span></code></a>,
or <a class="reference internal" href="reference/citrine.resources.ingredient_spec.html#citrine.resources.ingredient_spec.IngredientSpecCollection.list_by_material" title="citrine.resources.ingredient_spec.IngredientSpecCollection.list_by_material"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IngredientSpecCollection.list_by_material()</span></code></a>.</p>
<p>The measurements of a material can be located with
<a class="reference internal" href="reference/citrine.resources.measurement_run.html#citrine.resources.measurement_run.MeasurementRunCollection.list_by_material" title="citrine.resources.measurement_run.MeasurementRunCollection.list_by_material"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MeasurementRunCollection.list_by_material()</span></code></a>.</p>
</section>
<section id="updating-data-model-objects">
<h2><span class="section-number">2.5. </span>Updating Data Model Objects<a class="headerlink" href="#updating-data-model-objects" title="Permalink to this headline">¶</a></h2>
<p>Runs and specs can be quickly modified in-place and persisted with <code class="docutils literal notranslate"><span class="pre">upload</span></code>, but templates require more care.
In particular, changing the bounds or allowed names/labels of a template could invalidate existing data objects; thus every object on platform must be compared against the desired change.
To attempt such a template update, use <a class="reference internal" href="reference/citrine.resources.data_concepts.html#citrine.resources.data_concepts.DataConceptsCollection.async_update" title="citrine.resources.data_concepts.DataConceptsCollection.async_update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">async_update()</span></code></a>.
If the update is invalid, then the reasons for failure are logged.</p>
</section>
<section id="referencing-data-model-objects">
<h2><span class="section-number">2.6. </span>Referencing Data Model Objects<a class="headerlink" href="#referencing-data-model-objects" title="Permalink to this headline">¶</a></h2>
<p>Many data model objects contain links to other data model objects.
For example, a <a class="reference internal" href="reference/citrine.resources.material_spec.html#citrine.resources.material_spec.MaterialSpec" title="citrine.resources.material_spec.MaterialSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaterialSpec</span></code></a> references the <a class="reference internal" href="reference/citrine.resources.process_spec.html#citrine.resources.process_spec.ProcessSpec" title="citrine.resources.process_spec.ProcessSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProcessSpec</span></code></a> that produced it.
These links are created with the <a class="reference external" href="https://citrineinformatics.github.io/gemd-python/reference/gemd.entity.link_by_uid.html#gemd.entity.link_by_uid.LinkByUID" title="(in GEMD-python)"><code class="xref py py-class docutils literal notranslate"><span class="pre">LinkByUID</span></code></a> class, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">process</span> <span class="o">=</span> <span class="n">ProcessSpec</span><span class="p">(</span><span class="s2">&quot;my process&quot;</span><span class="p">,</span> <span class="n">uids</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;my namespace&quot;</span><span class="p">:</span> <span class="s2">&quot;my process&quot;</span><span class="p">})</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">process_specs</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">process</span><span class="p">)</span>
<span class="n">link</span> <span class="o">=</span> <span class="n">LinkByUID</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;my namespace&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;my_process&quot;</span><span class="p">)</span>
<span class="n">material</span> <span class="o">=</span> <span class="n">MaterialSpec</span><span class="p">(</span><span class="s2">&quot;my material&quot;</span><span class="p">,</span> <span class="n">process</span><span class="o">=</span><span class="n">link</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">material_specs</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="material-history">
<h2><span class="section-number">2.7. </span>Material History<a class="headerlink" href="#material-history" title="Permalink to this headline">¶</a></h2>
<p>Starting with a specific terminal <a class="reference internal" href="reference/citrine.resources.material_run.html#citrine.resources.material_run.MaterialRun" title="citrine.resources.material_run.MaterialRun"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaterialRun</span></code></a>,
you can retrieve the complete material history – every process, ingredient, and material that contributed to
the target material, as well as the measurements that were performed on all of those materials.
The method is <a class="reference internal" href="reference/citrine.resources.material_run.html#citrine.resources.material_run.MaterialRunCollection.get_history" title="citrine.resources.material_run.MaterialRunCollection.get_history"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_history()</span></code></a>,
and it requires you to know a unique identifier (scope/id pair) for the material.</p>
</section>
<section id="validating-data-model-objects">
<h2><span class="section-number">2.8. </span>Validating Data Model Objects<a class="headerlink" href="#validating-data-model-objects" title="Permalink to this headline">¶</a></h2>
<section id="dry-run-validation">
<h3><span class="section-number">2.8.1. </span>Dry-Run Validation<a class="headerlink" href="#dry-run-validation" title="Permalink to this headline">¶</a></h3>
<p>If you try to <code class="docutils literal notranslate"><span class="pre">register</span></code> or <code class="docutils literal notranslate"><span class="pre">delete</span></code> an invalid data model object, the operation fails with an error message that
specifies in what way(s) the data model object was invalid. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">spec</span> <span class="o">=</span> <span class="n">ProcessSpec</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">ProcessRun</span><span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>

<span class="n">spec</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">process_specs</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">process_runs</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">run</span><span class="p">)</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">process_specs</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">uids</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>yields</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ERROR:citrine._session:400 DELETE projects/$PROJECT_ID/datasets/$DATASET_ID/process-specs/id/$PROCESS_SPEC_ID
ERROR:citrine._session:{&quot;code&quot;:400,&quot;message&quot;:&quot;object $PROCESS_SPEC_ID in dataset $DATASET_ID not deleted. See ValidationErrors for details.&quot;,&quot;validation_errors&quot;:[{&quot;failure_message&quot;:&quot;Referenced by process_run in dataset $DATASET_ID with ID $PROCESS_RUN_ID&quot;,&quot;failure_id&quot;:&quot;object.mutation.referenced&quot;}]}
</pre></div>
</div>
<p>If you want to run these same validations on a data model object without the possibility of registering or deleting the
object, pass the <code class="docutils literal notranslate"><span class="pre">dry_run=True</span></code> argument to either the <code class="docutils literal notranslate"><span class="pre">register</span></code> or <code class="docutils literal notranslate"><span class="pre">delete</span></code> method. In the example above, this
would look like</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">process_specs</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">uids</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">dry_run</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Setting <code class="docutils literal notranslate"><span class="pre">dry_run=True</span></code> in either <code class="docutils literal notranslate"><span class="pre">register</span></code> or <code class="docutils literal notranslate"><span class="pre">delete</span></code> causes the method to run through all of its validations
and if any fail, provide the same error that the method would provide without the <code class="docutils literal notranslate"><span class="pre">dry_run</span></code> argument. If all
validations succeed, the method returns the same success value that it would without the <code class="docutils literal notranslate"><span class="pre">dry_run</span></code> argument, but the
object will not be registered or deleted.</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">dry_run=False</span></code> is equivalent to not specifying <code class="docutils literal notranslate"><span class="pre">dry_run</span></code> at all and will have no effect.</p>
</section>
<section id="template-and-simple-validations">
<h3><span class="section-number">2.8.2. </span>Template and Simple Validations<a class="headerlink" href="#template-and-simple-validations" title="Permalink to this headline">¶</a></h3>
<p>Sometimes, it is convenient to validate a group of runs and/or specs against their attribute and object
templates before any of the data objects are stored.
The <code class="docutils literal notranslate"><span class="pre">.validate_templates()</span></code> methods, available for all runs and specs, validate the provided object against all of the
(already-stored) attribute templates linked to attributes on the object as well as against an optional object template.
Notably, these methods do not validate linked objects in any way, making it possible to run validations on an object
with links to yet-unstored objects.
Be aware that this means that <code class="docutils literal notranslate"><span class="pre">.validate_templates()</span></code> will not surface any link-based errors.
This method returns a list of validation errors, which is empty on validation success.</p>
<p>The examples below illustrate the usage of <code class="docutils literal notranslate"><span class="pre">.validate_templates()</span></code> and its expected return values.</p>
<p>Example with validation errors with no object template:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">condition1</span> <span class="o">=</span> <span class="n">Condition</span><span class="p">(</span><span class="s1">&#39;condition_name&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">UniformInteger</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">condition2</span> <span class="o">=</span> <span class="n">Condition</span><span class="p">(</span><span class="s1">&#39;condition_name&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">UniformInteger</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">parameter1</span> <span class="o">=</span> <span class="n">Parameter</span><span class="p">(</span><span class="s1">&#39;parameter_name&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">UniformInteger</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">parameter2</span> <span class="o">=</span> <span class="n">Parameter</span><span class="p">(</span><span class="s1">&#39;parameter_name&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">UniformInteger</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">process_spec</span> <span class="o">=</span> <span class="n">ProcessSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;spec name&#39;</span><span class="p">)</span>
<span class="n">process_run</span> <span class="o">=</span> <span class="n">ProcessRun</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;run name&#39;</span><span class="p">,</span>
    <span class="n">spec</span><span class="o">=</span><span class="n">process_spec</span><span class="p">,</span>
    <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">condition1</span><span class="p">,</span> <span class="n">condition2</span><span class="p">],</span>
    <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="n">parameter1</span><span class="p">,</span> <span class="n">parameter2</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">process_runs</span><span class="o">.</span><span class="n">validate_templates</span><span class="p">(</span><span class="n">process_run</span><span class="p">)</span>
</pre></div>
</div>
<p>has return value:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;failure_message&#39;</span><span class="p">:</span> <span class="s1">&#39;Multiple Condition with named condition_name&#39;</span><span class="p">,</span> <span class="s1">&#39;property&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;failure_id&#39;</span><span class="p">:</span> <span class="s1">&#39;attribute.duplicate&#39;</span><span class="p">,</span> <span class="s1">&#39;input&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="bp">NotImplemented</span><span class="p">},</span>
 <span class="p">{</span><span class="s1">&#39;failure_message&#39;</span><span class="p">:</span> <span class="s1">&#39;Multiple Parameter with named parameter_name&#39;</span><span class="p">,</span> <span class="s1">&#39;property&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;failure_id&#39;</span><span class="p">:</span> <span class="s1">&#39;attribute.duplicate&#39;</span><span class="p">,</span> <span class="s1">&#39;input&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="bp">NotImplemented</span><span class="p">}]</span>
</pre></div>
</div>
<p>Example with validation errors with an object template:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">condition_template</span> <span class="o">=</span> <span class="n">ConditionTemplate</span><span class="p">(</span><span class="s2">&quot;condition template&quot;</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">IntegerBounds</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">condition_template</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">condition_templates</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">condition_template</span><span class="p">)</span>

<span class="n">condition</span> <span class="o">=</span> <span class="n">Condition</span><span class="p">(</span><span class="s2">&quot;condition&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">UniformInteger</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">template</span><span class="o">=</span><span class="n">condition_template</span><span class="p">)</span>
<span class="n">process_template</span> <span class="o">=</span> <span class="n">ProcessTemplate</span><span class="p">(</span>
    <span class="s2">&quot;pt&quot;</span><span class="p">,</span>
    <span class="n">conditions</span><span class="o">=</span><span class="p">[[</span><span class="n">LinkByUID</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">condition_template</span><span class="o">.</span><span class="n">uids</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]),</span> <span class="n">IntegerBounds</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]]</span>
<span class="p">)</span>
<span class="n">process_spec</span> <span class="o">=</span> <span class="n">ProcessSpec</span><span class="p">(</span><span class="s2">&quot;ps&quot;</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="n">process_template</span><span class="p">)</span>
<span class="n">process_run</span> <span class="o">=</span> <span class="n">ProcessRun</span><span class="p">(</span><span class="s2">&quot;pr&quot;</span><span class="p">,</span> <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">condition</span><span class="p">],</span> <span class="n">spec</span><span class="o">=</span><span class="n">process_spec</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">process_runs</span><span class="o">.</span><span class="n">validate_templates</span><span class="p">(</span><span class="n">process_run</span><span class="p">,</span> <span class="n">object_template</span><span class="o">=</span><span class="n">process_template</span><span class="p">)</span>
</pre></div>
</div>
<p>has return value:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;failure_message&#39;</span><span class="p">:</span> <span class="s1">&#39;UniformInteger(1,3) extends below 2 </span><span class="si">{2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;property&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;failure_id&#39;</span><span class="p">:</span> <span class="s1">&#39;attribute.bounds.value&#39;</span><span class="p">,</span> <span class="s1">&#39;input&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="bp">NotImplemented</span><span class="p">}]</span>
</pre></div>
</div>
<p>For ingredients, the associated object template is a process template that is provided as a separate parameter. Any
value provided to the <code class="docutils literal notranslate"><span class="pre">object_template</span></code> parameter for an ingredient will be ignored.</p>
<p>Example with validation errors for an ingredient:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">process_template</span> <span class="o">=</span> <span class="n">ProcessTemplate</span><span class="p">(</span><span class="s2">&quot;pt&quot;</span><span class="p">,</span> <span class="n">allowed_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">],</span> <span class="n">allowed_labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;bar&quot;</span><span class="p">])</span>
<span class="n">process_spec</span> <span class="o">=</span> <span class="n">ProcessSpec</span><span class="p">(</span><span class="s2">&quot;ps&quot;</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="n">process_template</span><span class="p">)</span>

<span class="n">mat_process_spec</span> <span class="o">=</span> <span class="n">ProcessSpec</span><span class="p">(</span><span class="s2">&quot;mps&quot;</span><span class="p">)</span>
<span class="n">material_spec</span> <span class="o">=</span> <span class="n">MaterialSpec</span><span class="p">(</span><span class="s2">&quot;ms&quot;</span><span class="p">,</span> <span class="n">process</span><span class="o">=</span><span class="n">mat_process_spec</span><span class="p">)</span>

<span class="n">ingredient_spec</span> <span class="o">=</span> <span class="n">IngredientSpec</span><span class="p">(</span>
    <span class="s2">&quot;is&quot;</span><span class="p">,</span>
    <span class="n">process</span><span class="o">=</span><span class="n">process_spec</span><span class="p">,</span>
    <span class="n">material</span><span class="o">=</span><span class="n">material_spec</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ingredient&quot;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">ingredient_specs</span><span class="o">.</span><span class="n">validate_templates</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="n">ingredient_spec</span><span class="p">,</span>
    <span class="n">ingredient_process_template</span><span class="o">=</span><span class="n">process_template</span>
<span class="p">)</span>
</pre></div>
</div>
<p>has return value:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;failure_message&#39;</span><span class="p">:</span> <span class="s1">&#39;Ingredient label ingredient not in list of allowed labels Set(bar)&#39;</span><span class="p">,</span> <span class="s1">&#39;property&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;failure_id&#39;</span><span class="p">:</span> <span class="s1">&#39;ingredient.label.allowed&#39;</span><span class="p">,</span> <span class="s1">&#39;input&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="bp">NotImplemented</span><span class="p">},</span>
 <span class="p">{</span><span class="s1">&#39;failure_message&#39;</span><span class="p">:</span> <span class="s1">&#39;Ingredient name is not in list of allowed names Set(foo)&#39;</span><span class="p">,</span> <span class="s1">&#39;property&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;failure_id&#39;</span><span class="p">:</span> <span class="s1">&#39;ingredient.name.allowed&#39;</span><span class="p">,</span> <span class="s1">&#39;input&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="bp">NotImplemented</span><span class="p">}]</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="data_extraction.html" class="btn btn-neutral float-right" title="3. [ALPHA] Data Extraction" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="getting_started/code_examples.html" class="btn btn-neutral float-left" title="1.8. Code Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, Citrine Informatics.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>