
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>4.6. Data Sources &#8212; Citrine Python 0.0.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4.7. Predictor reports" href="predictor_reports.html" />
    <link rel="prev" title="4.5. Scores" href="scores.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="data-sources">
<h1>4.6. Data Sources<a class="headerlink" href="#data-sources" title="Permalink to this headline">¶</a></h1>
<p>Data sources are used by modules to pull data from outside of the AI engine.
For example, a <a class="reference internal" href="predictors.html"><span class="doc">predictor</span></a> may need to define external training data.</p>
<div class="section" id="csv-data-source">
<h2>4.6.1. CSV Data Source<a class="headerlink" href="#csv-data-source" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../reference/citrine.informatics.data_sources.html#citrine.informatics.data_sources.CSVDataSource" title="citrine.informatics.data_sources.CSVDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">CSVDataSource</span></code></a> draws data from a CSV file stored on the data platform and annotates it by mapping each column name to a <a class="reference internal" href="../reference/citrine.informatics.descriptors.html#citrine.informatics.descriptors.Descriptor" title="citrine.informatics.descriptors.Descriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Descriptor</span></code></a>.
The file is referenced via a <a class="reference internal" href="../reference/citrine.resources.file_link.html#citrine.resources.file_link.FileLink" title="citrine.resources.file_link.FileLink"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileLink</span></code></a>.
Each FileLink references an explicit version of the CSV file.
Uploading a new file with the same name will produce a new version of the file with a new FileLink.</p>
<p>The columns in the CSV are extracted and parsed by a mapping of column header names to user-created descriptors.
Columns in the CSV that are not mapped with a descriptor are ignored.</p>
<p>Assume that a file data.csv exists with the following contents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Chemical</span> <span class="n">Formula</span><span class="p">,</span><span class="n">Gap</span><span class="p">,</span><span class="n">Crystallinity</span>
<span class="n">Bi2Te3</span><span class="p">,</span><span class="mf">0.153</span><span class="p">,</span><span class="n">Single</span> <span class="n">crystalline</span>
<span class="n">Mg2Ge</span><span class="p">,</span><span class="mf">0.567</span><span class="p">,</span><span class="n">Single</span> <span class="n">crystalline</span>
<span class="n">GeTe</span><span class="p">,</span><span class="mf">0.7</span><span class="p">,</span><span class="n">Amorphous</span>
<span class="n">Sb2Se3</span><span class="p">,</span><span class="mf">1.15</span><span class="p">,</span><span class="n">Polycrystalline</span>
</pre></div>
</div>
<p>That file could be used as the training data for a predictor as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">citrine.informatics.data_sources</span> <span class="kn">import</span> <span class="n">CSVDataSource</span>
<span class="kn">from</span> <span class="nn">citrine.informatics.predictors</span> <span class="kn">import</span> <span class="n">SimpleMLPredictor</span>
<span class="kn">from</span> <span class="nn">citrine.informatics.descriptors</span> <span class="kn">import</span> <span class="n">RealDescriptor</span><span class="p">,</span> <span class="n">CategoricalDescriptor</span><span class="p">,</span> <span class="n">ChemicalFormulaDescriptor</span>

<span class="n">file_link</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="s2">&quot;./data.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;bandgap_data.csv&quot;</span><span class="p">)</span>

<span class="n">data_source</span> <span class="o">=</span> <span class="n">CsvDataSource</span><span class="p">(</span>
    <span class="n">file_link</span> <span class="o">=</span> <span class="n">file_link</span><span class="p">,</span>
    <span class="c1"># `column_definitions` maps a column header to a descriptor</span>
    <span class="c1"># the column header and the descriptor key do not need to be identical</span>
    <span class="n">column_definitions</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Chemical Formula&quot;</span><span class="p">:</span> <span class="n">ChemicalFormulaDescriptor</span><span class="p">(</span><span class="s2">&quot;formula&quot;</span><span class="p">),</span>
        <span class="s2">&quot;Gap&quot;</span><span class="p">:</span> <span class="n">RealDescriptor</span><span class="p">(</span><span class="s2">&quot;Band gap&quot;</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s2">&quot;eV&quot;</span><span class="p">),</span>
        <span class="s2">&quot;Crystallinity&quot;</span><span class="p">:</span> <span class="n">CategoricalDescriptor</span><span class="p">(</span><span class="s2">&quot;Crystallinity&quot;</span><span class="p">,</span> <span class="n">categories</span><span class="o">=</span><span class="p">[</span>
            <span class="s2">&quot;Single crystalline&quot;</span><span class="p">,</span> <span class="s2">&quot;Amorphous&quot;</span><span class="p">,</span> <span class="s2">&quot;Polycrystalline&quot;</span><span class="p">])</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="n">predictor</span> <span class="o">=</span> <span class="n">SimpleMLPredictor</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Band gap predictor&quot;</span><span class="p">,</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Predict the band gap from the chemical formula and crystallinity&quot;</span><span class="p">,</span>
    <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="c1"># referencing `data_source.column_definitions` is one way to ensure that the</span>
        <span class="c1"># descriptors in the training data match the descriptors in the predictor definition</span>
        <span class="n">data_source</span><span class="o">.</span><span class="n">column_definitions</span><span class="p">[</span><span class="s2">&quot;Chemical Formula&quot;</span><span class="p">],</span>
        <span class="n">data_source</span><span class="o">.</span><span class="n">column_definitions</span><span class="p">[</span><span class="s2">&quot;Crystallinity&quot;</span><span class="p">]</span>
    <span class="p">],</span>
    <span class="n">outputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">data_source</span><span class="o">.</span><span class="n">column_definitions</span><span class="p">[</span><span class="s2">&quot;Gap&quot;</span><span class="p">]],</span>
    <span class="n">latent_variables</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="n">training_data</span> <span class="o">=</span> <span class="n">data_source</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="ara-table-data-source">
<h2>4.6.2. Ara Table Data Source<a class="headerlink" href="#ara-table-data-source" title="Permalink to this headline">¶</a></h2>
<p>An <a class="reference internal" href="../reference/citrine.informatics.data_sources.html#citrine.informatics.data_sources.AraTableDataSource" title="citrine.informatics.data_sources.AraTableDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">AraTableDataSource</span></code></a> references an Ara table.
As explained more in the <a class="reference internal" href="../data_extraction.html"><span class="doc">documentation</span></a>, Ara tables provide a structured version of on-platform data.
Ara tables are specified by the display table uuid and version number.
The example below assumes that the uuid and the version of the desired Ara table are known.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">citrine.informatics.data_sources</span> <span class="kn">import</span> <span class="n">AraTableDataSource</span>
<span class="kn">from</span> <span class="nn">citrine.informatics.predictors</span> <span class="kn">import</span> <span class="n">SimpleMLPredictor</span>
<span class="kn">from</span> <span class="nn">citrine.informatics.descriptors</span> <span class="kn">import</span> <span class="n">RealDescriptor</span><span class="p">,</span> <span class="n">CategoricalDescriptor</span><span class="p">,</span> <span class="n">ChemicalFormulaDescriptor</span>

<span class="n">data_source</span> <span class="o">=</span> <span class="n">AraTableDataSource</span><span class="p">(</span>
    <span class="n">table_id</span> <span class="o">=</span> <span class="s2">&quot;842434fd-11fe-4324-815c-7db93c7ed81e&quot;</span><span class="p">,</span>
    <span class="n">table_version</span> <span class="o">=</span> <span class="s2">&quot;2&quot;</span>
<span class="p">)</span>

<span class="n">predictor</span> <span class="o">=</span> <span class="n">SimpleMLPredictor</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Band gap predictor&quot;</span><span class="p">,</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Predict the band gap from the chemical formula and crystallinity&quot;</span><span class="p">,</span>
    <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">ChemicalFormulaDescriptor</span><span class="p">(</span><span class="s2">&quot;root~formula&quot;</span><span class="p">),</span>
        <span class="n">CategoricalDescriptor</span><span class="p">(</span><span class="s2">&quot;root~crystallinity&quot;</span><span class="p">,</span> <span class="n">categories</span><span class="o">=</span><span class="p">[</span>
            <span class="s2">&quot;Single crystalline&quot;</span><span class="p">,</span> <span class="s2">&quot;Amorphous&quot;</span><span class="p">,</span> <span class="s2">&quot;Polycrystalline&quot;</span><span class="p">])</span>
    <span class="p">],</span>
    <span class="n">outputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">RealDescriptor</span><span class="p">(</span><span class="s2">&quot;root~band gap&quot;</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s2">&quot;eV&quot;</span><span class="p">)],</span>
    <span class="n">latent_variables</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="n">training_data</span> <span class="o">=</span> <span class="n">data_source</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo.png" alt="Logo"/>
    
  </a>
</p>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=CitrineInformatics&repo=citrine-python&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">1. Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/connecting.html">1.1. Connecting to the Citrine Platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/basic_structure.html">1.2. Structure of the Citrine Python Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/basic_functionality.html">1.3. Using the Citrine Python Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/data_model.html">1.4. Data Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/public_access.html">1.5. Dataset Access Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/working_with_files.html">1.6. Working With Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/projects_and_users.html">1.7. Projects and Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/code_examples.html">1.8. Code Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data_entry.html">2. Data Entry</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../data_entry.html#creating-data-model-objects">2.1. Creating Data Model Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_entry.html#identifiying-data-model-objects">2.2. Identifiying Data Model Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_entry.html#registering-data-model-objects">2.3. Registering Data Model Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_entry.html#finding-data-model-objects">2.4. Finding Data Model Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_entry.html#referencing-data-model-objects">2.5. Referencing Data Model Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_entry.html#validating-data-model-objects">2.6. Validating Data Model Objects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data_extraction.html">3. [ALPHA] Data Extraction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../data_extraction.html#defining-row-and-columns">3.1. Defining row and columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_extraction.html#defining-tables">3.2. Defining tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_extraction.html#previewing-tables">3.3. Previewing tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_extraction.html#building-and-downloading-tables">3.4. Building and downloading tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_extraction.html#available-row-definitions">3.5. Available Row Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_extraction.html#available-variable-definitions">3.6. Available Variable Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_extraction.html#available-column-definitions">3.7. Available Column Definitions</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">4. [ALPHA] AI Engine</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="getting_started.html">4.1. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="predictors.html">4.2. Predictors</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_spaces.html">4.3. Design spaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="processors.html">4.4. Processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="scores.html">4.5. Scores</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.6. Data Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="predictor_reports.html">4.7. Predictor reports</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance_workflows.html">4.8. Performance workflows</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ/index.html">5. FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../FAQ/prohibited_data_patterns.html">5.1. Prohibited Data Patterns</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">4. [ALPHA] AI Engine</a><ul>
      <li>Previous: <a href="scores.html" title="previous chapter">4.5. Scores</a></li>
      <li>Next: <a href="predictor_reports.html" title="next chapter">4.7. Predictor reports</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Citrine Informatics.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/workflows/data_sources.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>