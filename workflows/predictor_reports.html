<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4.10. Predictor Reports &mdash; Citrine Python 1.53.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4.11. Predictor Evaluation Workflows" href="predictor_evaluation_workflows.html" />
    <link rel="prev" title="4.9. Data Sources" href="data_sources.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.53.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">1. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_entry.html">2. GEMD Data Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_extraction.html">3. [ALPHA] Data Extraction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">4. AI Engine</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="getting_started.html">4.1. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="descriptors.html">4.2. Descriptors</a></li>
<li class="toctree-l2"><a class="reference internal" href="descriptors.html#platform-vocabularies">4.3. Platform Vocabularies</a></li>
<li class="toctree-l2"><a class="reference internal" href="predictors.html">4.4. Predictors</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_spaces.html">4.5. Design Spaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="processors.html">4.6. Processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_workflows.html">4.7. Design Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="scores.html">4.8. Scores</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_sources.html">4.9. Data Sources</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.10. Predictor Reports</a></li>
<li class="toctree-l2"><a class="reference internal" href="predictor_evaluation_workflows.html">4.11. Predictor Evaluation Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_examples.html">4.12. AI Engine Code Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../formulations_example.html">5. Formulations Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ/index.html">6. FAQ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Citrine Python</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">4. </span>AI Engine</a> &raquo;</li>
      <li><span class="section-number">4.10. </span>Predictor Reports</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/workflows/predictor_reports.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="predictor-reports">
<h1><span class="section-number">4.10. </span>Predictor Reports<a class="headerlink" href="#predictor-reports" title="Permalink to this headline"></a></h1>
<p>Training a predictor generally produces a set of inter-connected models.
A predictor report describes those models, for example their settings and what features are important to the model.
It does not include predictor evaluation metrics.
To learn more about predictor evaluation metrics, please see <a class="reference internal" href="predictor_evaluation_workflows.html"><span class="doc">PredictorEvaluationMetrics</span></a>.
The report can be accessed via <code class="docutils literal notranslate"><span class="pre">predictor.report</span></code>.</p>
<p>A task to generate a predictor report is scheduled when a predictor is registered.
The report has a <code class="docutils literal notranslate"><span class="pre">status</span></code> and <code class="docutils literal notranslate"><span class="pre">json</span></code> member variables.
Status can be one of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PENDING</span></code> The report has been scheduled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERROR</span></code> An error was thrown while generating the report.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> The report was generated successfully and the results are ready.</p></li>
</ul>
<p>Results of the report are in the <code class="docutils literal notranslate"><span class="pre">descriptors</span></code> and <code class="docutils literal notranslate"><span class="pre">model_summaries</span></code> attributes.
<code class="docutils literal notranslate"><span class="pre">descriptors</span></code> is a list of <a class="reference internal" href="../reference/citrine.informatics.descriptors.html#citrine.informatics.descriptors.Descriptor" title="citrine.informatics.descriptors.Descriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Descriptor</span></code></a> objects that may be inputs or outputs to models in the predictor.</p>
<p><code class="docutils literal notranslate"><span class="pre">model_summaries</span></code> is a list of <a class="reference internal" href="../reference/citrine.informatics.reports.html#citrine.informatics.reports.ModelSummary" title="citrine.informatics.reports.ModelSummary"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelSummary</span></code></a> objects, each one corresponding to a single model in the predictor.
Each <code class="docutils literal notranslate"><span class="pre">ModelSummary</span></code> includes the name of the model, a list of input descriptors, a list of output descriptors, the model’s settings, and its feature importances.
<code class="docutils literal notranslate"><span class="pre">model_settings</span></code> is a dictionary of settings and values, the details of which depend on the type of model.
One possible model settings dictionary is shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;Algorithm&#39;</span><span class="p">:</span> <span class="s1">&#39;Ensemble of non-linear estimators&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Number of estimators&#39;</span><span class="p">:</span> <span class="mi">64</span><span class="p">,</span>
    <span class="s1">&#39;Use jackknife&#39;</span><span class="p">:</span> <span class="kc">True</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">feature_importances</span></code> is a list of <a class="reference internal" href="../reference/citrine.informatics.reports.html#citrine.informatics.reports.FeatureImportanceReport" title="citrine.informatics.reports.FeatureImportanceReport"><code class="xref py py-class docutils literal notranslate"><span class="pre">FeatureImportanceReport</span></code></a> objects, each of which corresponds to a single output of the model.
It has fields <code class="docutils literal notranslate"><span class="pre">output_key</span></code>, which is the key of the output descriptor, and <code class="docutils literal notranslate"><span class="pre">importances</span></code>, which is a dictionary from input keys to their importance.
The input and output keys correspond to descriptors that can be found in the predictor report’s <code class="docutils literal notranslate"><span class="pre">descriptors</span></code> field.
An example is shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;output_key&#39;</span><span class="p">:</span> <span class="s1">&#39;shear modulus&#39;</span><span class="p">,</span>
    <span class="s1">&#39;importances&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;Young&#39;</span><span class="n">s</span> <span class="n">modulus</span><span class="s1">&#39;: 0.85,</span>
        <span class="s1">&#39;Poisson&#39;</span><span class="n">s</span> <span class="n">ratio</span><span class="s1">&#39;: 0.15</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For simple models, such as those that featurize inputs, the <code class="docutils literal notranslate"><span class="pre">model_settings</span></code> and <code class="docutils literal notranslate"><span class="pre">feature_importances</span></code> fields might be empty.</p>
<p>As an example, consider a <a class="reference internal" href="../reference/citrine.informatics.predictors.auto_ml_predictor.html#citrine.informatics.predictors.auto_ml_predictor.AutoMLPredictor" title="citrine.informatics.predictors.auto_ml_predictor.AutoMLPredictor"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoMLPredictor</span></code></a> with numeric inputs <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> and numeric output <code class="docutils literal notranslate"><span class="pre">z</span></code>.
This predictor will produce a single model to predict <code class="docutils literal notranslate"><span class="pre">z</span></code> from <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>.
In cases involving multiple ml predictors and/or input featurization, more models will be produced.
The code below shows how to create the predictor, register it, and view the report.
Assume that there is a training data table with known id and version.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="kn">from</span> <span class="nn">citrine.informatics.predictors</span> <span class="kn">import</span> <span class="n">GraphPredictor</span><span class="p">,</span> <span class="n">AutoMLPredictor</span>
<span class="kn">from</span> <span class="nn">citrine.informatics.descriptors</span> <span class="kn">import</span> <span class="n">RealDescriptor</span>
<span class="kn">from</span> <span class="nn">citrine.informatics.data_sources</span> <span class="kn">import</span> <span class="n">GemTableDataSource</span>

<span class="c1"># create input descriptors</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">RealDescriptor</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">RealDescriptor</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">RealDescriptor</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="c1"># create ML predictor</span>
<span class="n">auto_ml_predictor</span> <span class="o">=</span> <span class="n">AutoMLPredictor</span><span class="p">(</span>
   <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ML predictor for z&#39;</span><span class="p">,</span>
   <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Predicts z from x and y&#39;</span><span class="p">,</span>
   <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span>
   <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">z</span><span class="p">],</span>
   <span class="n">training_data</span><span class="o">=</span><span class="p">[</span><span class="n">GemTableDataSource</span><span class="p">(</span>
    <span class="n">table_id</span> <span class="o">=</span> <span class="n">training_table_id</span><span class="p">,</span>
    <span class="n">table_version</span> <span class="o">=</span> <span class="n">training_table_version</span>
    <span class="p">)]</span>
<span class="p">)</span>

<span class="c1"># register a predictor with a project</span>
<span class="n">predictor</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">predictors</span><span class="o">.</span><span class="n">register</span><span class="p">(</span>
   <span class="n">GraphPredictor</span><span class="p">(</span>
       <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ML predictor for z&#39;</span><span class="p">,</span>
       <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Predicts z from x and y&#39;</span><span class="p">,</span>
       <span class="n">predictors</span><span class="o">=</span><span class="p">[</span><span class="n">auto_ml_predictor</span><span class="p">]</span>
   <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># wait for the predictor report to be ready</span>
<span class="k">while</span> <span class="n">project</span><span class="o">.</span><span class="n">predictors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">predictor</span><span class="o">.</span><span class="n">uid</span><span class="p">)</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;PENDING&#39;</span><span class="p">:</span>
   <span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># print the json report</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">predictors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">predictor</span><span class="o">.</span><span class="n">uid</span><span class="p">)</span><span class="o">.</span><span class="n">report</span>
<span class="nb">print</span><span class="p">(</span><span class="n">report</span><span class="o">.</span><span class="n">json</span><span class="p">)</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="data_sources.html" class="btn btn-neutral float-left" title="4.9. Data Sources" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="predictor_evaluation_workflows.html" class="btn btn-neutral float-right" title="4.11. Predictor Evaluation Workflows" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, Citrine Informatics.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>